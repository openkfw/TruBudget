version: "3.2"
services:
  alpha:
    image: trubudget/blockchain:latest
    environment:
      MULTICHAIN_RPC_PORT: ${MULTICHAIN_RPC_PORT}
      ORGANIZATION: ${ORGANIZATION}
      MULTICHAIN_RPC_PASSWORD: ${MULTICHAIN_RPC_PASSWORD}
    volumes:
      - /tmp/bcAlphaVolume:/root/.multichain
    ports:
      - "7447:7447"
      - "8000:${MULTICHAIN_RPC_PORT}"
  api:
    image: trubudget/api:latest
    environment:
      MULTICHAIN_RPC_HOST: ${MULTICHAIN_RPC_HOST}
      MULTICHAIN_RPC_PORT: ${MULTICHAIN_RPC_PORT}
      ROOT_SECRET: ${ROOT_SECRET}
      MULTICHAIN_RPC_PASSWORD: ${MULTICHAIN_RPC_PASSWORD}
      PORT: ${API_PORT}
      ORGANIZATION: ${ORGANIZATION}
      ORGANIZATION_VAULT_SECRET: ${ORGANIZATION_VAULT_SECRET}
    links:
      - alpha
    ports:
      - "8080:${API_PORT}"
  provisioning:
    image: trubudget/provisioning:latest
    environment:
      API_HOST: ${API_HOST}
      API_PORT: ${API_PORT}
      PROVISIONING_TYPE: ${PROVISIONING_TYPE}
      ROOT_SECRET: ${ROOT_SECRET}
      ORGANIZATION: ${ORGANIZATION}
    links:
      - api
