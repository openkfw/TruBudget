 Environment Variables

In the following you can find all the environment variables used in the TruBudget project. Use this list as reference for development and deployment.

| Project                    | Shortcut |
| -------------------------- | -------- |
| Frontend                   | ui       |
| API                        | api      |
| Blockchain                 | bc       |
| Provisioning               | prov     |
| Excel export service       | excel    |
| Storage service            | storage  |
| Email notification service | email    |
| Docker-compose             | scripts  |

If you need a `.env.example` file as a template, use the `.env.example` file in `/scripts/operation`. This file has all values pre-filled. Some values need to be adjusted to your local setup.

| Env Variable                       | Required | Default Value                     | Used by              | Description                                                                                                                                                                                                                                                                                                                                                                                     |
| ---------------------------------- | -------- | --------------------------------- | -------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |



## Connected services
### Email-Service
The email-service can be configured via the following environment variables.
To get started have a look at dedicated [documentation](../email-notification-service/README.md)
| **ACCESS_CONTROL_ALLOW_ORIGIN**           | no                                     | *                                                                | API | Since the service uses CORS, the domain by which it can be called needs to be set. Setting this value to `*` means that it can be called from any domain. Read more about this topic [here](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS).                                                                                                                                             |
| **ACCESS_CONTROL_ALLOW_ORIGIN**        | no | *                                                                                                                                                                                                                                                                                                | Storage Service | CORS configuration. Defaults to allow all origins.                                                                                                                   |
| **ACCESS_CONTROL_ALLOW_ORIGIN** | no                           | *                                 | Email notofocation service | Since the service uses CORS, the domain by which it can be called needs to be set. Setting this value to `*` means that it can be called from any domain. Read more about this topic [here](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS).  |
| **ACCESS_CONTROL_ALLOW_ORIGIN** | no | *          | Excel Export Service | Since the export service uses CORS, the domain by which it can be called needs to be set. Setting this value to `` means that it can be called from any domain. Read more about this topic [here](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS).  |
| **API_DB_HOST**                           | yes (if REFRESH_TOKEN_STORAGE=db)      | localhost                                                        | API | Database host Allowed values: "".                                                                                                                                                                                                                                                                                                                                                                |
| **API_DB_NAME**                           | yes (if REFRESH_TOKEN_STORAGE=db)      | trubudget_email_service                                          | API | Name of the used database Example values: "trubudget-db". Allowed values: "".                                                                                                                                                                                                                                                                                                                    |
| **API_DB_PASSWORD**                       | yes (if REFRESH_TOKEN_STORAGE=db)      | test                                                             | API | Database password for database connection Allowed values: "".                                                                                                                                                                                                                                                                                                                                    |
| **API_DB_PORT**                           | yes (if REFRESH_TOKEN_STORAGE=db)      | 5432                                                             | API | Database port, e.g. 5432 Allowed values: "".                                                                                                                                                                                                                                                                                                                                                     |
| **API_DB_SCHEMA**                         | yes (if REFRESH_TOKEN_STORAGE=db)      | public                                                           | API | Database schema, e.g. "public".                                                                                                                                                                                                                                                                                                                                                                  |
| **API_DB_SSL**                            | yes (if REFRESH_TOKEN_STORAGE=db)      | -                                                                | API | Database SSL connection. Allowed values: "true" or "false". Allowed values: "".                                                                                                                                                                                                                                                                                                                  |
| **API_DB_USER**                           | yes (if REFRESH_TOKEN_STORAGE=db)      | postgres                                                         | API | Database user for database connection, e.g. postgres Allowed values: "".                                                                                                                                                                                                                                                                                                                         |
| **API_HOST**                    | no | localhost  | Excel Export Service | Hots/IP address of the API service.                                                                                                                                                                                                                         |
| **API_HOST**                   | no                                  | localhost        | Used to build the URL to the alpha-node's API when requesting network access. (The IP addresses are usually the same as for the P2P host address).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **API_PORT**                    | no | 8080       | Excel Export Service | Port of the API service. Value is a port with minimal value 0 and maximal value 65535                                                                                                                                                                       |
| **API_PORT**                   | no                                  | 8080             | The port used to connect to the alpha-node's api. Value is a port with minimal value 0 and maximal value 65535                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **API_PROTOCOL**                | no | http       | Excel Export Service | Protocol of the API service. Allowed values: "http", "https".                                                                                                                                                                                               |
| **API_PROTOCOL**               | no                                  | http             | The Protocol which should be used to connect to the alpha-node's api. (http, https) Allowed values: "http", "https".                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **API_REFRESH_TOKENS_TABLE**              | yes (if REFRESH_TOKEN_STORAGE=db)      | refresh_token                                                    | API | Name of table where refresh tokens will be stored, e.g. "refresh_token".                                                                                                                                                                                                                                                                                                                         |
| **APPLICATIONINSIGHTS_CONNECTION_STRING** | no                                     | -                                                                | API | Azure Application Insights Connection String Allowed values: "".                                                                                                                                                                                                                                                                                                                                 |
| **AUTHENTICATION**              | no                           | jwt                               | Email notofocation service | If set to none, no JWT-Token is required for all endpoints. If set JWT, a JWT token is necessary. Allowed values: "none", "jwt".                                                                                                                      |
| **AUTHPROXY_ENABLED**                     | no                                     | -                                                                | API | Enables logging in using the authorization token from authentication proxy                                                                                                                                                                                                                                                                                                                       |
| **AUTHPROXY_JWS_SIGNATURE**               | yes (if AUTHPROXY_ENABLED=true)        | -                                                                | API | secret/public key/certificate for verifying auth proxy token signature Allowed values: "".                                                                                                                                                                                                                                                                                                       |
| **AUTOSTART**                  | no                                  | true             | If set to false multichain daemon will not start automatically.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **AZURE_ACCOUNT_NAME**                 | no | -                                                                                                                                                                                                                                                                                                | Storage Service | -                                                                                                                                                                    |
| **AZURE_CONTAINER_NAME**               | no | container                                                                                                                                                                                                                                                                                        | Storage Service | Container name of the connected Azure blob storage. Container will be created if it doesn't exists.                                                                  |
| **AZURE_STORAGE_CONNECTION_STRING**    | no | DefaultEndpointsProtocol=http;AccountName=devstoreaccount1;AccountKey=Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==;BlobEndpoint=http://host.docker.internal:10000/devstoreaccount1;QueueEndpoint=http://host.docker.internal:10001/devstoreaccount1; | Storage Service | Connection string for Azure blob storage on Azure or locally on Azurite.                                                                                             |
| **AZURE_STORAGE_PORT**                 | no | 10000                                                                                                                                                                                                                                                                                            | Storage Service | Port on which Azurite is running. Required only with local development environment. Value is a port with minimal value 0 and maximal value 65535                     |
| **BLOCKCHAIN_PORT**                       | no                                     | 8085                                                             | API | The port used to expose the multichain daemon of your Trubudget blockchain installation(bc). The port used to connect to the multichain daemon(api). This will be used internally for the communication between the API and the multichain daemon.                                                                                                                                               |
| **BLOCKCHAIN_PROTOCOL**                   | no                                     | http                                                             | API | The Protocol of the blockchain where the server is available for incoming http connections. Allowed values: "http", "https".                                                                                                                                                                                                                                                                     |
| **BLOCKNOTIFY_SCRIPT**         | no                                  | -                | Configure the blocknotifiy argument of the multichain configuration like -blocknotify=[BLOCKNOTIFY_SCRIPT]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **BUILDTIMESTAMP**              | no | -          | Excel Export Service | Defines the BUILDTIMESTAMP property returned by the version endpoint.                                                                                                                                                                                       |
| **BUILDTIMESTAMP**             | no                                  | -                | The /version endpoint returns this variable as `buildTimestamp` property.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **CERT_CA_PATH**               | no                                  | -                | The path to the certificate authority root certificate by the blockchain to authenticate with the connection peer. Note that self-signed certificates are not allowed in production environments.[More information can be found here](https://www.cloudflare.com/en-gb/learning/access-management/what-is-mutual-authentication/)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **CERT_KEY_PATH**              | no                                  | -                | The path to the certificate key used by the blockchain to authenticate with the connection peer. [More information can be found here](https://www.cloudflare.com/en-gb/learning/access-management/what-is-mutual-authentication/)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **CERT_PATH**                  | no                                  | -                | The path to the certificate used by the blockchain to authenticate with the connection peer. Note that self-signed certificates are not allowed in production environments. [More information can be found here](https://www.cloudflare.com/en-gb/learning/access-management/what-is-mutual-authentication/)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **CI_COMMIT_SHA**               | no | -          | Excel Export Service | Defines the CI_COMMIT_SHA property returned by the version endpoint.                                                                                                                                                                                        |
| **CI_COMMIT_SHA**              | no                                  | -                | The /version endpoint returns this variable as `commit` property.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **DB_HOST**                     | no                           | localhost                         | Email notofocation service | IP/host of connected database.                                                                                                                                                                                                                        |
| **DB_NAME**                     | no                           | trubudget_email_service           | Email notofocation service | Name of the database.                                                                                                                                                                                                                                 |
| **DB_PASSWORD**                 | no                           | test                              | Email notofocation service | Password for connected database.                                                                                                                                                                                                                      |
| **DB_PORT**                     | no                           | 5432                              | Email notofocation service | Port of connected database. Value is a port with minimal value 0 and maximal value 65535                                                                                                                                                              |
| **DB_SCHEMA**                   | no                           | public                            | Email notofocation service | Schema of connected database                                                                                                                                                                                                                          |
| **DB_SSL**                      | no                           | -                                 | Email notofocation service | If true the DB connection is using the SSL protocol                                                                                                                                                                                                   |
| **DB_TYPE**                               | no                                     | pg                                                               | API | -                                                                                                                                                                                                                                                                                                                                                                                                |
| **DB_TYPE**                     | no                           | pg                                | Email notofocation service | Type of database. A currently supported list can be found in the [Database Configuration section](#database-configuration). Allowed values: "pg", "sqlite3", "mysql", "mysql2", "oracledb", "mssql".                                                  |
| **DB_USER**                     | no                           | postgres                          | Email notofocation service | User name for connected database.                                                                                                                                                                                                                     |
| **DOCUMENT_EXTERNAL_LINKS_ENABLED**       | no                                     | -                                                                | API | If true, it is possible to use external documents links also without TruBudget's storage-service. If false, the external documents links feature of TruBudget is still possible to use in case DOCUMENT_FEATURE_ENABLED equals "true".                                                                                                                                                           |
| **DOCUMENT_FEATURE_ENABLED**              | no                                     | -                                                                | API | If true, all uploaded documents are stored using trubudget's storage-service. If false, the document feature of TruBudget is disabled, and trying to upload a document will result in an error.                                                                                                                                                                                                  |
| **EMAIL_FROM**                  | yes                          | -                                 | Email notofocation service | This is injected into the `from` field of the email notification.                                                                                                                                                                                     |
| **EMAIL_HOST**                            | no                                     | localhost                                                        | API | -                                                                                                                                                                                                                                                                                                                                                                                                |
| **EMAIL_HOST**                 | yes (if EMAIL_SERVICE_ENABLED=true) | -                | The IP address from the email-notification service.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **EMAIL_PORT**                            | no                                     | 8089                                                             | API | -                                                                                                                                                                                                                                                                                                                                                                                                |
| **EMAIL_PORT**                 | yes (if EMAIL_SERVICE_ENABLED=true) | -                | The port address from the email-notification service.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **EMAIL_PROTOCOL**                        | no                                     | http                                                             | API | Protocol of connected storage service. Allowed values: "http", "https".                                                                                                                                                                                                                                                                                                                          |
| **EMAIL_SERVICE_ENABLED**      | no                                  | -                | If set to `true` the Email-Service feature is enabled and the EMAIL_* variables are required                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **EMAIL_SSL**                  | no                                  | -                | If set to `true` the connection between blockchain and email-notification service is https instead of http.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **EMAIL_SUBJECT**               | no                           | Trubudget Notification            | Email notofocation service | This is injected into the `subject` field of the email notification.                                                                                                                                                                                  |
| **EMAIL_TEXT**                  | no                           | You have received a notification. | Email notofocation service | This is injected into the `body` of the email notification.                                                                                                                                                                                           |
| **ENCRYPTION_PASSWORD**                   | no                                     | -                                                                | API | If set, all data that is send to the MultiChain node and external storage will be symmetrically encrypted by the ENCRYPTION_PASSWORD Allowed values: "".                                                                                                                                                                                                                                         |
| **EXPOSE_MC**                  | no                                  | -                | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **EXTERNAL_IP**                | no                                  | -                | The EXTERNAL_IP option is the IP address with which the current node can be reached. The variable is forwarded to the multichain daemon as `externalip` argument. This will be reported to other nodes in the Trubudget network. By default, daemon will try to automatically detect an external IP address. However, this might not always be accurate, especially if a node is behind a NAT or a firewall. By using EXTERNAL_IP, you can manually specify the IP. This can be useful if you want to ensure that your node is reachable at a specific address. If your node is not actually reachable at the specified IP address (e.g. because of a firewall), other nodes might not be able to connect to it.  Example: If you have a VM running on 22.22.22.22 and you want to start a beta node from this VM to connect to an alpha running on 11.11.11.11, you set `EXTERNAL_IP` to 11.11.11.11 on alpha node and 22.22.22.22 on beta node.  |
| **JWT_ALGORITHM**                         | no                                     | HS256                                                            | API | Algorithm used for signing and verifying JWTs. Allowed values: "HS256", "RS256", "", "".                                                                                                                                                                                                                                                                                                         |
| **JWT_ALGORITHM**               | no                           | HS256                             | Email notofocation service | Algorithm used for signing and verifying JWTs. Currently `HS256` or `RS256` are supported. Allowed values: "HS256", "RS256".                                                                                                                          |
| **JWT_PUBLIC_KEY**                        | yes (if JWT_ALGORITHM=RS256)           | -                                                                | API | If JWT_ALGORITHM is set to `RS256`, this is required and holds BASE64 encoded PEM encoded public key for RSA.                                                                                                                                                                                                                                                                                    |
| **JWT_PUBLIC_KEY**              | yes (if JWT_ALGORITHM=RS256) | -                                 | Email notofocation service | If JWT_ALGORITHM is set to `RS256`, this is required and holds BASE64 encoded PEM encoded public key for RSA.                                                                                                                                         |
| **JWT_SECRET**                            | yes (if JWT_ALGORITHM=RS256)           | f2b56d36b0898f6f220a                                             | API | A string that is used to sign JWT which are created by the authenticate endpoint of the api. If JWT_ALGORITHM is set to `RS256`, this is required and holds BASE64 encoded PEM encoded private key for RSA. Minimal value: 10.                                                                                                                                                                   |
| **JWT_SECRET**                  | yes (if JWT_ALGORITM=HS256)  | -                                 | Email notofocation service | If JWT_ALGORITHM is set to `HS256`, this is required and holds a secret to verify API-issued JWTs, with 32 length. If JWT_ALGORITHM is `RS256`, leave blank.                                                                                          |
| **JWT_SECRET**                 | yes (if EMAIL_SERVICE_ENABLED=true) | -                | The `JWT_SECRET` is only required if the Email feature is enabled. It is used to authenticate the blockchain at the email-service, so it can send notifications.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **KUBE_NAMESPACE**             | no                                  | -                | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **KUBE_SERVICE_NAME**          | no                                  | -                | -                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **LOG_LEVEL**                             | no                                     | info                                                             | API | Defines the log output. Allowed values: "trace", "debug", "info", "warn", "error", "fatal".                                                                                                                                                                                                                                                                                                      |
| **LOG_LEVEL**                          | no | info                                                                                                                                                                                                                                                                                             | Storage Service | Defines the log output. Supported levels are `trace`, `debug`, `info`, `warn`, `error`, `fatal`. Allowed values: "trace", "debug", "info", "warn", "error", "fatal". |
| **LOG_LEVEL**                   | no                           | info                              | Email notofocation service | Defines the log output. Allowed values: "trace", "debug", "info", "warn", "error", "fatal".                                                                                                                                                           |
| **LOG_LEVEL**                   | no | info       | Excel Export Service | Defines the log output. Allowed values: "trace", "debug", "info", "warn", "error", "fatal".                                                                                                                                                                 |
| **LOG_LEVEL**                  | no                                  | info             | Defines the log output. Allowed values: "fatal", "error", "warn", "info", "debug", "trace".                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **MINIO_ACCESS_KEY**                   | no | minio                                                                                                                                                                                                                                                                                            | Storage Service | Access key for Minio server.                                                                                                                                         |
| **MINIO_BUCKET_NAME**                  | no | trubudget                                                                                                                                                                                                                                                                                        | Storage Service | Bucket name of the connected Minio server                                                                                                                            |
| **MINIO_HOST**                         | no | localhost                                                                                                                                                                                                                                                                                        | Storage Service | Host/IP address of connected Minio server.                                                                                                                           |
| **MINIO_PORT**                         | no | 9000                                                                                                                                                                                                                                                                                             | Storage Service | Port of connected Minio server Value is a port with minimal value 0 and maximal value 65535                                                                          |
| **MINIO_PROTOCOL**                     | no | http                                                                                                                                                                                                                                                                                             | Storage Service | Protocol of connected Minio server. `http` or `https`. Allowed values: "http", "https".                                                                              |
| **MINIO_REGION**                       | no | us-east-1                                                                                                                                                                                                                                                                                        | Storage Service | Region where the bucket is created. This parameter is optional. Default value is us-east-1.                                                                          |
| **MINIO_SECRET_KEY**                   | no | minio123                                                                                                                                                                                                                                                                                         | Storage Service | Secret (Password) for Minio server.                                                                                                                                  |
| **MULTICHAIN_DIR**             | no                                  | /root            | The path to the multichain folder where the blockchain data is persisted. For installations via `docker compose`, this refers to the path within the docker container of the blockchain. For bare metal installations, this refers to the path on the machine the blockchain is running on.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **MULTICHAIN_FEED_ENABLED**    | no                                  | -                | If set to true the multichain-feed go script in src/multichain-feed/multichain-feed is passed to the multichain daemon and executed in a separate process.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **MULTICHAIN_PROTOCOL**                   | no                                     | http                                                             | API | The protocol used to expose the multichain daemon of your Trubudget blockchain installation(bc). The protocol used to connect to the multichain daemon(api). This will be used internally for the communication between the API and the multichain daemon. Allowed values: "http", "https".                                                                                                      |
| **MULTICHAIN_RPC_HOST**                   | no                                     | localhost                                                        | API | The IP address of the blockchain (not multichain daemon,but they are usally the same) you want to connect to.                                                                                                                                                                                                                                                                                    |
| **MULTICHAIN_RPC_PASSWORD**               | no                                     | s750SiJnj50yIrmwxPnEdSzpfGlTAHzhaUwgqKeb0G1j                     | API | Password used by the API to connect to the blockchain. The password is set by the origin node upon start. Every beta node needs to use the same RPC password in order to be able to connect to the blockchain.  **Hint:** Although the MULTICHAIN_RPC_PASSWORD is not required it is highly recommended to set an own secure one.                                                                |
| **MULTICHAIN_RPC_PASSWORD**    | yes                                 | -                | Password used by the API to connect to the blockchain. The password is set by the origin node upon start. Every beta node needs to use the same RPC password in order to be able to connect to the blockchain.  **Hint:** Although the MULTICHAIN_RPC_PASSWORD is not required it is highly recommended to set an own secure one. Minimal value: 32.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **MULTICHAIN_RPC_PORT**                   | no                                     | 8000                                                             | API | The Port of the blockchain where the server is available for incoming http connections (e.g. readiness, versions, backup and restore)                                                                                                                                                                                                                                                            |
| **MULTICHAIN_RPC_PORT**        | yes                                 | 8000             | The port used to expose the multichain daemon of your Trubudget blockchain installation(bc). The port used to connect to the multichain daemon(api). This will be used internally for the communication between the API and the multichain daemon. Value is a port with minimal value 0 and maximal value 65535                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **MULTICHAIN_RPC_USER**                   | no                                     | multichainrpc                                                    | API | The user used to connect to the multichain daemon. Allowed values: "".                                                                                                                                                                                                                                                                                                                           |
| **MULTICHAIN_RPC_USER**        | yes                                 | multichainrpc    | The user used to connect to the multichain daemon.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **NODE_ENV**                              | no                                     | production                                                       | API | If set to `development` api will allow any string as password. If set to `production` passwords must satisfy safePasswordSchema, see lib/joiValidation-.ts & -.spec.ts files Allowed values: "production", "development", "testing".                                                                                                                                                             |
| **NODE_ENV**                    | no | production | Excel Export Service | -                                                                                                                                                                                                                                                           |
| **NODE_ENV**                   | no                                  | production       | Environment: Default development when running development-script. Production when running production-script                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **NOTIFICATION_MAX_LIFETIME**  | no                                  | 24               | This number configure how long notifications shall be saved in the NOTIFICATION_PATH in hours                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **NOTIFICATION_PATH**          | no                                  | ./notifications/ | The path where notification files shall be saved on the blockchain environment                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **NOTIFICATION_SEND_INTERVAL** | no                                  | 10               | This number configure in which interval the notifications in the NOTIFICATION_PATH should be checked and send.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **ORGANIZATION**                          | yes                                    | -                                                                | API | In the blockchain network, each node is represented by its organization name. This environment variable sets this organization name. It is used to create the organization stream on the blockchain and is also displayed in the frontend's top right corner. Minimal value: 1. Maximal value: 100.                                                                                              |
| **ORGANIZATION**               | no                                  | MyOrga           | In the blockchain network, each node is represented by its organization name. This environment variable sets this organization name. It is used to create the organization stream on the blockchain.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **ORGANIZATION_VAULT_SECRET**             | yes                                    | -                                                                | API | This is the key to en-/decrypt user data of an organization. If you want to add a new node for your organization, you want users to be able to log in on either node.  **Caution:** If you want to run TruBudget in production, make sure NOT to use the default value from the `.env.example` file! Minimal value: 5.                                                                           |
| **P2P_HOST**                   | no                                  | -                | The IP address of the blockchain node you want to connect to. When given, the node joins the existing network rather than creating its own chain.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **P2P_PORT**                   | no                                  | 7447             | The port on which the node you want to connect to has exposed the blockchain. Value is a port with minimal value 0 and maximal value 65535                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **PORT**                                  | no                                     | 8091                                                             | API | The port used to expose the API for your installation.  Example: If you run TruBudget locally and set API_PORT to `8080`, you can reach the API via `localhost:8080/api`. Value is a port with minimal value 0 and maximal value 65535                                                                                                                                                           |
| **PORT**                        | no                           | 8890                              | Email notofocation service | The port used to expose the email-notification service. Value is a port with minimal value 0 and maximal value 65535                                                                                                                                  |
| **PORT**                        | no | 8888       | Excel Export Service | The port used to expose the excel-export service. Value is a port with minimal value 0 and maximal value 65535                                                                                                                                              |
| **PORT**                       | no                                  | 8085             | This is the port where the multichain can be downloaded (backup) Value is a port with minimal value 0 and maximal value 65535                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **PRETTY_PRINT**                | no                           | -                                 | Email notofocation service | If true the log output is pretty printed.                                                                                                                                                                                                             |
| **PRETTY_PRINT**               | no                                  | -                | Decides whether the logs printed by the API are pretty printed or not. Pretty printed logs are easier to read while non-pretty printed logs are easier to store and use e.g. in the ELK (Elasticsearch-Logstash-Kabana) stack.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **RATE_LIMIT**                            | no                                     | -                                                                | API | If set, API will limit the number of requests from any individual IP address to the set number per minute. Can be set to any `number`, but shouldn't be set too low. Allowed values: "".                                                                                                                                                                                                         |
| **RATE_LIMIT**                         | no | -                                                                                                                                                                                                                                                                                                | Storage Service | Defines the limit each IP to {RATE_LIMIT} requests per windowMs (1 minute).                                                                                          |
| **RATE_LIMIT**                  | no                           | -                                 | Email notofocation service | - Allowed values: "".                                                                                                                                                                                                                                 |
| **RATE_LIMIT**                  | no | -          | Excel Export Service | Defines the limit each IP to {RATE_LIMIT} requests per windowMs (1 minute)                                                                                                                                                                                  |
| **REFRESH_TOKEN_STORAGE**                 | no                                     | -                                                                | API | Determining the type of storage for refresh tokens. Allowed values are "db" or "memory" or blank to disable refresh token functionality. Allowed values: "db", "memory", "".                                                                                                                                                                                                                     |
| **ROOT_SECRET**                           | yes                                    | 8c8631d86c30dc251d84f65a6b9fbbd908f3ea92e800af0c69fa5574fe3668c8 | API | The root secret is the password for the root user. If you start with an empty blockchain, the root user is needed to add other users, approve new nodes,.. If you don't set a value via the environment variable, the API generates one randomly and prints it to the console  **Caution:** If you want to run TruBudget in production, make sure to set a secure root secret. Minimal value: 8. |
| **RPC_ALLOW_IP**               | no                                  | 0.0.0.0/0        | It refers to an allowed IP address range, given either by IP or CIDR notation. 0.0.0.0/0 will allow access from anywhere.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **SHORT_ROUTES_LOGGING_OUTPUT**        | no | -                                                                                                                                                                                                                                                                                                | Storage Service | -                                                                                                                                                                    |
| **SIGNING_METHOD**                        | no                                     | node                                                             | API | Possible signing methods are: `node` and `user`. Transactions on the chain will be signed using either the address of the node or the address of the specific user publishing that transaction. Allowed values: "node", "user".                                                                                                                                                                  |
| **SILENCE_LOGGING_ON_FREQUENT_ROUTES**    | no                                     | -                                                                | API | Set to "true" if you want to hide route logging on frequent and technical endpoints like `/readiness`, `/version`, etc.                                                                                                                                                                                                                                                                          |
| **SILENCE_LOGGING_ON_FREQUENT_ROUTES** | no | -                                                                                                                                                                                                                                                                                                | Storage Service | -                                                                                                                                                                    |
| **SMTP_HOST**                   | no                           | localhost                         | Email notofocation service | IP/host of external SMTP-Server used to actually send notification emails.                                                                                                                                                                            |
| **SMTP_PASSWORD**               | no                           | -                                 | Email notofocation service | Password of external SMTP-Server used to actually send notification emails.                                                                                                                                                                           |
| **SMTP_PORT**                   | no                           | 2500                              | Email notofocation service | Port of external SMTP-Server. Value is a port with minimal value 0 and maximal value 65535                                                                                                                                                            |
| **SMTP_SSL**                    | no                           | -                                 | Email notofocation service | If true the external SMTP-Server connection is using the SSL protocol.                                                                                                                                                                                |
| **SMTP_USER**                   | no                           | -                                 | Email notofocation service | This is forwarded to the auth prop of the nodemailer's transport-options, to authenticate with the credentials of the configured SMTP server.                                                                                                         |
| **SNAPSHOT_EVENT_INTERVAL**               | no                                     | 3                                                                | API | -                                                                                                                                                                                                                                                                                                                                                                                                |
| **SQL_DEBUG**                             | no                                     | -                                                                | API | -                                                                                                                                                                                                                                                                                                                                                                                                |
| **SQL_DEBUG**                   | no                           | -                                 | Email notofocation service | The SQL Debug option is forwarded to the knex configuration.                                                                                                                                                                                          |
| **STORAGE_PROVIDER**                   | no | minio                                                                                                                                                                                                                                                                                            | Storage Service |  Set to `azure-storage` if you use Azure Storage Account, otherwise defaults to `minio`. Allowed values: "azure-storage", "minio".                                   |
| **STORAGE_SERVICE_EXTERNAL_URL**          | yes (if DOCUMENT_FEATURE_ENABLED=true) | -                                                                | API | IP and port of own connected storage service accessible externally                                                                                                                                                                                                                                                                                                                               |
| **STORAGE_SERVICE_HOST**                  | no                                     | localhost                                                        | API | IP of connected storage service                                                                                                                                                                                                                                                                                                                                                                  |
| **STORAGE_SERVICE_PORT**                  | no                                     | 8090                                                             | API | Port of connected storage service Allowed values: "".                                                                                                                                                                                                                                                                                                                                            |
| **STORAGE_SERVICE_PORT**               | no | 8090                                                                                                                                                                                                                                                                                             | Storage Service | The port used to expose the storage service. Value is a port with minimal value 0 and maximal value 65535                                                            |
| **STORAGE_SERVICE_PROTOCOL**              | no                                     | http                                                             | API | Protocol of connected storage service. Allowed values: "http", "https".                                                                                                                                                                                                                                                                                                                          |
| **SWAGGER_BASEPATH** `deprecated`         | no                                     | -                                                                | API | deprecated This variable was used to choose which environment (prod or test) is used for testing the requests. The variable is deprecated now, as the Swagger documentation can be used for the prod and test environment separately. Example values: "/".                                                                                                                                       |
| **USER_TABLE**                  | no                           | users                             | Email notofocation service | Name of the table which is created if the first email address is inserted.                                                                                                                                                                            |
| ------------------------------ | ----------------------------------- | ---------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| ----------------------------------------------- | -------- | ----------------------------------------------------------------------------------- | ----- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| API_HOST                                        | no | -                                                                                   | Frontend | IP address of the api. This is only required if nginx proxy is used. <br>**Hint:** When deployed locally the host is set to localhost                                                                         |
| API_PORT                                        | no |  8080                                                                                | Frontend | Port of the api. This is only required if nginx proxy is used                                                                                                                                                 |
| API_PROTOCOL                                    | no |  http                                                                                | Frontend | Protocol of the api. This is only required if nginx proxy is used. "http" or "https"                                                                                                                          |
| EMAIL_HOST                      | no |  -             | Frontend | IP address of the email notification service                                                                                                                    |
| EMAIL_PORT                      | no |  8890          | Frontend | Port of the email notification service                                                                                                                          |
| EMAIL_PROTOCOL                  | no |  http          | Frontend | Protocol of the email notification service                                                                                                                      |
| EXPORT_HOST                      | no |  -             | Frontend | IP address of the excel export service                                                                                                              |
| EXPORT_PORT                      | no |  8888          | Frontend | Port of the excel export service                                                                                                                    |
| EXPORT_PROTOCOL                  | no |  http          | Frontend | Protocol of the excel export service. "http" or "https"                                                                                             |
| NODE_ENV                                        | no | -                                                                                   | Frontend | If set to `development` search Trubudget's external services (Email-/Excel-Export-Service) on localhost. <br>If set to `production` disable Redux devtools extension                                          |
| REACT_APP_API_SERVICE_ADDITIONAL_NGINX_CONF | no |  _undefined_                                                                         | Frontend | Additional configuration of nginx server for api service. It could be a muti-line string. It will be injected to the nginx configuration.                                                                                                                                                                  |
| REACT_APP_APPLICATIONINSIGHTS_CONNECTION_STRING | no |  _undefined_                                                                         | Frontend | Azure Application Insights Connection String                                                                                                                                                                  |
| REACT_APP_AUTHPROXY_ENABLED                     | no |  `false`                                                                             | Frontend | Enables rendering of auth proxy login button                                                                                                                                                                  |
| REACT_APP_AUTHPROXY_URL                         | no |  `http://localhost:4000/signin`                                                      | Frontend | auth proxy ingress. Required if REACT_APP_AUTHPROXY_ENABLED is set to true                                                                                                                                    |
| REACT_APP_EMAIL_SERVICE_ADDITIONAL_NGINX_CONF | no |  _undefined_                                                                         | Frontend | Additional configuration of nginx server for email service. It could be a muti-line string. It will be injected to the nginx configuration.                                                                                                                                                                  |
| REACT_APP_EMAIL_SERVICE_ENABLED | no |  false         | Frontend | When enabled, the frontend requests a email-service readiness call when entering the login screen.<br/>If true the email section in the user-profile is enabled |
| REACT_APP_EXCHANGE_RATE_URL                     | no |  `https://data-api.ecb.europa.eu/service/data/EXR/D..EUR.SP00.A?lastNObservations=1` | Frontend | The external URL where the exchange rates are fetched from. _Note: Setting this variable is generally not recommended. Optional configuration is provided in case of ECB changing the location of forex API._ |
| REACT_APP_EXPORT_SERVICE_ADDITIONAL_NGINX_CONF | no |  _undefined_                                                                         | Frontend | Additional configuration of nginx server for excel export service. It could be a muti-line string. It will be injected to the nginx configuration.                                                                                                                                                                  |
| REACT_APP_EXPORT_SERVICE_ENABLED | no |  false         | Frontend | If true the frontend requests a export-service readiness call when entering the login screen and <br/>the export button is shown at the side navbar |
| REACT_APP_POLLING_INTERVAL                      | no |  5000                                                                                | Frontend | How often is data fetched from the server, in milliseconds. We recommend setting to 30000 (30 seconds), maybe longer if you experience performance issues.                                                    |
| REACT_APP_STORAGE_SERVICE_ADDITIONAL_NGINX_CONF | no |  _undefined_                                                                         | Frontend | Additional configuration of nginx server for storage service. It could be a muti-line string. It will be injected to the nginx configuration.                                                                                                                                                                  |
| REACT_APP_VERSION                               | no | -                                                                                   | Frontend | Injected version via `$npm_package_version` in`.env` file to ensure the version is shown in the frontend                                                                                                      |
